<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>gameDay</title>

    <script th:inline="javascript">
        function showBattle(bbx, batx) {
            document.getElementById(bbx).innerHTML = document.getElementById(batx).innerText;
        }

        function showSum(bsx,sumx) {
            document.getElementById(bsx).innerHTML = document.getElementById(sumx).innerText;
        }
    </script>

</head>
<body>

<h1>matches page</h1>

<th:block th:each="game, iterator : ${nextRoundMatches}" th:object="${game}">
    <div th:with="c = city+${iterator.index}, h = hall+${iterator.index}">
        <p th:text="${__${c}__}">city</p>
        <p th:text="${__${h}__}">hall</p>
    </div>
    <th:block th:each="pvp: ${#numbers.sequence(1, 5)}" th:value="${pvp}">

        <div th:with="b = battle + ${pvp} + ${iterator.index},s = summary + ${pvp} + ${iterator.index}
                 ,showBattle = (${iterator.index}+1) * 10 + ${pvp}
                 ,showSummary = ((${iterator.index}+1) * 10 + ${pvp}) * (${iterator.size}+1)
                 ,hiddenBattle = ((${iterator.index}+1) * 10 + ${pvp}) * (${T(Math).pow((iterator.size+1),2)})
                 ,hiddenSummary = ((${iterator.index}+1) * 10 + ${pvp}) * (${T(Math).pow((iterator.size+1),3)})">

            <p th:id="${showBattle}" th:text="${__${b}__}" hidden>battle</p>
            <p th:id="${showSummary}" th:text="${__${s}__}" hidden>summary</p>

            <button th:id="${hiddenBattle}"  th:onclick="'javascript:showBattle(\''+${hiddenBattle}+'\',\''+${showBattle}+'\');'">show battle</button>
            <button th:id="${hiddenSummary}" th:onclick="'javascript:showBattle(\''+${hiddenSummary}+'\',\''+${showSummary}+'\');'">show summary</button>

        </div>
    </th:block>
</th:block>

<a href="/game/team">NEXT</a>

</body>
</html>

